{"version":3,"sources":["lib/4point.js","lib/invertMatrix.js","app.js","index.js"],"names":["adj","m","multmm","a","b","c","Array","i","j","cij","k","multmv","v","basisToPoints","x1","y1","x2","y2","x3","y3","x4","y4","transform2d","w","h","t","x1s","y1s","x1d","y1d","x2s","y2s","x2d","y2d","x3s","y3s","x3d","y3d","x4s","y4s","x4d","y4d","s","general2DProjection","invertMatrix","source","a1","a2","a3","a4","b1","b2","b3","b4","c1","c2","c3","c4","d1","d2","d3","d4","_A","temp","N","length","E","polar2cartesian","distance","angle","x","Math","cos","y","sin","cartesian2polar","sqrt","pow","atan2","nullTransform","nullTransformArray","DEFAULT_ANIMATIONS","Off","In","Out","DEFAULT_SPEEDS","Slow","Default","Fast","Faster","Dropdown","label","value","options","onChange","disabled","isVisible","isVisibleSet","useState","clickRef","useRef","ref","callback","handleClick","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","useClickOutside","className","onClick","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","Object","keys","map","optionKey","EXAMPLES","Flor","src","ratio","example","deep","App","sourceImage","sourceImageSet","floor","random","size","min","window","innerHeight","innerWidth","showSidebar","showSidebarSet","drawMode","drawModeSet","drosteDeep","drosteDeepSet","isSidebarAlwaysVisible","finalShowSidebar","currentAnimation","currentAnimationSet","currentSpeed","currentSpeedSet","pointSet","DRAW_MODE_FUNCTION","handleDrag","id","oldPoints","newPoints","handleDragMirror","getCounterPoint","handleDragLockAspect","origin","axisPointPolar","originalPoint1Polar","originalPoint2Polar","originalPoint3Polar","originalAxisDistance","axisDistance","point1PolarTransformed","point2PolarTransformed","cssTransform","cssInverse","join","interpolatedCssInverse25","flat","el","elIdx","cssInverse25","interpolatedCssInverse50","cssInverse50","interpolatedCssInverse75","cssInverse75","sixteenToNine","sixteen","var0","var3","null7","var6","var1","var4","null1","var7","null2","null3","null4","null5","var2","var5","null6","var8","multmm2","sixteenA","sixteenB","nineA","nineB","imageTransformArray","imageIdx","push","accent","style","overflow","animation","transform","alt","defaultPosition","position","onDrag","evt","data","display","8","16","32","72","128","256","val","Number","exampleKey","exampleObject","href","flex","flexWrap","type","event","stopPropagation","preventDefault","dt","dataTransfer","file","files","fr","FileReader","onload","async","base64src","currentTarget","result","base64","imageData","base64Str","maxMass","Promise","resolve","img","Image","canvas","createElement","originalWidth","originalHeight","round","getContext","drawImage","toDataURL","resizeImage","readAsDataURL","multiple","accept","aria-label","cx","cy","r","d","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.39c8f63a.chunk.js","sourcesContent":["/* eslint-disable */\n\n// https://math.stackexchange.com/questions/296794/finding-the-transform-matrix-from-4-projected-points-with-javascript\n\nfunction adj(m) {\n  // Compute the adjugate of m\n  return [\n    m[4] * m[8] - m[5] * m[7],\n    m[2] * m[7] - m[1] * m[8],\n    m[1] * m[5] - m[2] * m[4],\n    m[5] * m[6] - m[3] * m[8],\n    m[0] * m[8] - m[2] * m[6],\n    m[2] * m[3] - m[0] * m[5],\n    m[3] * m[7] - m[4] * m[6],\n    m[1] * m[6] - m[0] * m[7],\n    m[0] * m[4] - m[1] * m[3],\n  ];\n}\nfunction multmm(a, b) {\n  // multiply two matrices\n  var c = Array(9);\n  for (var i = 0; i != 3; ++i) {\n    for (var j = 0; j != 3; ++j) {\n      var cij = 0;\n      for (var k = 0; k != 3; ++k) {\n        cij += a[3 * i + k] * b[3 * k + j];\n      }\n      c[3 * i + j] = cij;\n    }\n  }\n  return c;\n}\nfunction multmv(m, v) {\n  // multiply matrix and vector\n  return [\n    m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n    m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n    m[6] * v[0] + m[7] * v[1] + m[8] * v[2],\n  ];\n}\nfunction basisToPoints(x1, y1, x2, y2, x3, y3, x4, y4) {\n  var m = [x1, x2, x3, y1, y2, y3, 1, 1, 1];\n  var v = multmv(adj(m), [x4, y4, 1]);\n  return multmm(m, [v[0], 0, 0, 0, v[1], 0, 0, 0, v[2]]);\n}\nfunction general2DProjection(x1s, y1s, x1d, y1d, x2s, y2s, x2d, y2d, x3s, y3s, x3d, y3d, x4s, y4s, x4d, y4d) {\n  var s = basisToPoints(x1s, y1s, x2s, y2s, x3s, y3s, x4s, y4s);\n  var d = basisToPoints(x1d, y1d, x2d, y2d, x3d, y3d, x4d, y4d);\n  return multmm(d, adj(s));\n}\nfunction project(m, x, y) {\n  var v = multmv(m, [x, y, 1]);\n  return [v[0] / v[2], v[1] / v[2]];\n}\nexport default function transform2d(w, h, x1, y1, x2, y2, x3, y3, x4, y4) {\n  // console.log(w, h, x1, y1, x2, y2, x3, y3, x4, y4)\n\n  var t = general2DProjection(0, 0, x1, y1, w, 0, x2, y2, 0, h, x3, y3, w, h, x4, y4);\n  for (let i = 0; i != 9; ++i) t[i] = t[i] / t[8];\n  // var matrix = new THREE.Matrix4();\n  // matrix.fromArray([t[0], t[3], 0, t[6], t[1], t[4], 0, t[7], 0, 0, 1, 0, t[2], t[5], 0, t[8]]);\n\n  return [t[0], t[3], 0, t[6], t[1], t[4], 0, t[7], 0, 0, 1, 0, t[2], t[5], 0, t[8]];\n\n  // return [0.5,0,0.09,0,0.00,0.5,0.09,0,-0.09,-0.09,1,0,4,4,0,1]\n}\n","/* eslint-disable */\n\nexport default  function invertMatrix(source) {\n  const [a1, a2, a3, a4, b1, b2, b3, b4, c1, c2, c3, c4, d1, d2, d3, d4] = source;\n\n  const _A = [\n    [a1, a2, a3, a4],\n    [b1, b2, b3, b4],\n    [c1, c2, c3, c4],\n    [d1, d2, d3, d4],\n  ];\n\n  var temp,\n    N = _A.length,\n    E = [];\n\n  for (var i = 0; i < N; i++) E[i] = [];\n\n  for (i = 0; i < N; i++)\n    for (var j = 0; j < N; j++) {\n      E[i][j] = 0;\n      if (i == j) E[i][j] = 1;\n    }\n\n  for (var k = 0; k < N; k++) {\n    temp = _A[k][k];\n\n    for (var j = 0; j < N; j++) {\n      _A[k][j] /= temp;\n      E[k][j] /= temp;\n    }\n\n    for (var i = k + 1; i < N; i++) {\n      temp = _A[i][k];\n\n      for (var j = 0; j < N; j++) {\n        _A[i][j] -= _A[k][j] * temp;\n        E[i][j] -= E[k][j] * temp;\n      }\n    }\n  }\n\n  for (var k = N - 1; k > 0; k--) {\n    for (var i = k - 1; i >= 0; i--) {\n      temp = _A[i][k];\n\n      for (var j = 0; j < N; j++) {\n        _A[i][j] -= _A[k][j] * temp;\n        E[i][j] -= E[k][j] * temp;\n      }\n    }\n  }\n\n  for (var i = 0; i < N; i++) for (var j = 0; j < N; j++) _A[i][j] = E[i][j];\n  return _A;\n}\n","/* eslint-disable */\n\nimport { JBX, Button, Text, Space, A } from 'jbx';\n\nimport React, { Fragment, useState, useRef, useEffect } from 'react';\nimport Draggable from 'react-draggable';\n\nimport transform2d from './lib/4point.js';\nimport invertMatrix from './lib/invertMatrix.js';\n\nimport './styles.css';\n\nfunction polar2cartesian({ distance, angle }) {\n  return {\n    x: distance * Math.cos(angle),\n    y: distance * Math.sin(angle)\n  };\n}\n\nfunction cartesian2polar({ x, y }) {\n  return {\n    distance: Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2)),\n    angle: Math.atan2(y, x)\n  };\n}\n\nconst nullTransform = `matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)`;\nconst nullTransformArray = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\nconst SIDEBAR_WIDTH = 300;\n\nconst DEFAULT_ANIMATIONS = {\n  Off: 'Off (Edit)',\n  In: 'In',\n  Out: 'Out'\n};\n\nconst DEFAULT_SPEEDS = {\n  Slow: '3s',\n  Default: '1.2s',\n  Fast: '0.7s',\n  Faster: '0.2s'\n};\n\nconst useClickOutside = (ref, callback) => {\n  const handleClick = (e) => {\n    if (ref.current && !ref.current.contains(e.target)) {\n      callback();\n    }\n  };\n  useEffect(() => {\n    document.addEventListener('click', handleClick);\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n\nfunction Dropdown({ label, value, options, onChange, disabled = false }) {\n  const [isVisible, isVisibleSet] = useState(false);\n  const clickRef = useRef();\n  useClickOutside(clickRef, () => {\n    isVisibleSet(false);\n  });\n\n  return (\n    <div\n      className={`dropdown ${isVisible ? '' : '-hide'} ${\n        disabled ? '-disabled' : ''\n      }`}\n      ref={clickRef}\n      onClick={() => {\n        isVisibleSet(!disabled && !isVisible);\n      }}\n    >\n      <Text className=\"dropdown-header\">\n        {label} <strong>{options[value]}</strong>\n      </Text>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <polyline points=\"6 9 12 15 18 9\"></polyline>\n      </svg>\n\n      <div className=\"dropdown-options\">\n        {Object.keys(options).map((optionKey) => (\n          <div\n            className=\"dropdown-option\"\n            key={optionKey}\n            onClick={() => {\n              onChange(optionKey);\n              isVisibleSet(false);\n            }}\n          >\n            <Text>{options[optionKey]}</Text>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction getCounterPoint(id) {\n  if (id === 0) return 3;\n  if (id === 1) return 2;\n  if (id === 2) return 1;\n  if (id === 3) return 0;\n}\n\nconst EXAMPLES = {\n  Flor: {\n    src: 'flor.jpg',\n    ratio: 1,\n    example: [0.852, 0.001, 1.1312, 0.6366, -0.073, 0.28, 0.148, 0.999],\n    deep: 32\n  },\n  'Chichen Itza': {\n    src: 'chichenitza.svg',\n    ratio: 1,\n    example: [0.12, 0.05, 1 - 0.12, 0.05, 0.1, 27 / 32, 0.9, 27 / 32],\n    deep: 8\n  },\n  'Tokyo 1': {\n    src: 'tokyo1.jpg',\n    ratio: 3 / 4,\n    example: [0.15, 0.2, 0.85, 0.2, 0.15, 0.9, 0.85, 0.9],\n    deep: 32\n  },\n  'Tokyo 2': {\n    src: 'tokyo2.jpg',\n    ratio: 3 / 4,\n    example: [0.15, 0.2, 0.85, 0.2, 0.15, 0.9, 0.85, 0.9],\n    deep: 32\n  },\n  'Tokyo 3': {\n    src: 'tokyo3.jpg',\n    ratio: 3 / 4,\n    example: [0.15, 0.2, 0.85, 0.2, 0.15, 0.9, 0.85, 0.9],\n    deep: 32\n  }\n};\n\nfunction App() {\n  const [sourceImage, sourceImageSet] = useState(\n    EXAMPLES[\n      Object.keys(EXAMPLES)[\n        Math.floor(Math.random() * Object.keys(EXAMPLES).length)\n      ]\n    ]\n  );\n  const size = Math.min(\n    window.innerHeight - 64,\n    window.innerWidth / sourceImage.ratio\n  );\n  const width = size * sourceImage.ratio;\n  const height = size;\n\n  const [showSidebar, showSidebarSet] = useState(false);\n  const [drawMode, drawModeSet] = useState('handleDrag');\n\n  const [drosteDeep, drosteDeepSet] = useState(sourceImage.deep || 32);\n\n  // always show if enough space\n  const isSidebarAlwaysVisible = window.innerWidth - width > SIDEBAR_WIDTH;\n\n  const finalShowSidebar = isSidebarAlwaysVisible ? true : showSidebar;\n\n  const [currentAnimation, currentAnimationSet] = useState('Off');\n  const [currentSpeed, currentSpeedSet] = useState('Default');\n\n  const [points, pointSet] = useState([\n    { x: width * sourceImage.example[0], y: height * sourceImage.example[1] },\n    { x: width * sourceImage.example[2], y: height * sourceImage.example[3] },\n    { x: width * sourceImage.example[4], y: height * sourceImage.example[5] },\n    { x: width * sourceImage.example[6], y: height * sourceImage.example[7] }\n  ]);\n\n  useEffect(() => {\n    const size = Math.min(\n      window.innerHeight - 64,\n      window.innerWidth / sourceImage.ratio\n    );\n    const width = size * sourceImage.ratio;\n    const height = size;\n\n    sourceImageSet(sourceImage);\n    drosteDeepSet(sourceImage.deep || 32);\n    pointSet([\n      {\n        x: width * sourceImage.example[0],\n        y: height * sourceImage.example[1]\n      },\n      {\n        x: width * sourceImage.example[2],\n        y: height * sourceImage.example[3]\n      },\n      {\n        x: width * sourceImage.example[4],\n        y: height * sourceImage.example[5]\n      },\n      {\n        x: width * sourceImage.example[6],\n        y: height * sourceImage.example[7]\n      }\n    ]);\n  }, [sourceImage]);\n\n  function handleDrag({ x, y }, id) {\n    pointSet((oldPoints) => {\n      const newPoints = [...oldPoints];\n      newPoints[id] = { x, y };\n      return newPoints;\n    });\n  }\n\n  function handleDragMirror({ x, y }, id) {\n    pointSet((oldPoints) => {\n      const newPoints = [...oldPoints];\n      newPoints[id] = { x, y };\n      newPoints[getCounterPoint(id)] = { x: width - x, y: height - y };\n      return newPoints;\n    });\n  }\n\n  async function resizeImage(base64Str, maxMass = 728 * 728) {\n    return new Promise((resolve) => {\n      let img = new Image();\n      img.src = base64Str;\n      img.onload = () => {\n        let canvas = document.createElement('canvas');\n\n        const originalWidth = img.width;\n        const originalHeight = img.height;\n\n        let width = img.width;\n        let height = img.height;\n\n        while (width * height > maxMass) {\n          width = width / Math.sqrt(2, 2);\n          height = height / Math.sqrt(2, 2);\n        }\n\n        width = Math.round(width);\n        height = Math.round(height);\n\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0, width, height);\n        resolve([canvas.toDataURL(), { originalWidth, originalHeight }]);\n      };\n    });\n  }\n\n  function onFileSelected(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const dt = event.dataTransfer;\n    const files = dt ? dt.files : event.target.files;\n    const file = files[0];\n\n    const fr = new window.FileReader();\n\n    fr.onload = async (data) => {\n      const base64src = data.currentTarget.result;\n\n      const [base64, imageData] = await resizeImage(base64src);\n\n      sourceImageSet({\n        src: base64,\n        ratio: imageData.originalWidth / imageData.originalHeight,\n        example: [0.2, 0.2, 0.8, 0.2, 0.2, 0.8, 0.8, 0.8],\n        deep: 20\n      });\n    };\n    fr.readAsDataURL(file);\n  }\n\n  function handleDragLockAspect({ x, y }, id) {\n    pointSet((oldPoints) => {\n      const newPoints = [...oldPoints];\n\n      // moved point\n      newPoints[id] = { x, y };\n\n      const origin = newPoints[0];\n\n      const axisPointPolar = cartesian2polar({\n        x: newPoints[3].x - origin.x,\n        y: newPoints[3].y - origin.y\n      });\n\n      const originalPoint1Polar = cartesian2polar({\n        x: width,\n        y: 0\n      });\n\n      const originalPoint2Polar = cartesian2polar({\n        x: 0,\n        y: height\n      });\n\n      const originalPoint3Polar = cartesian2polar({\n        x: width,\n        y: height\n      });\n\n      const originalAxisDistance = Math.sqrt(width * width + height * height);\n\n      const axisDistance = Math.sqrt(\n        Math.pow(newPoints[3].x - origin.x, 2) +\n          Math.pow(newPoints[3].y - origin.y, 2)\n      );\n\n      const point1PolarTransformed = {\n        distance: (axisDistance / originalAxisDistance) * width,\n        angle:\n          axisPointPolar.angle +\n          originalPoint1Polar.angle -\n          originalPoint3Polar.angle\n      };\n\n      newPoints[1] = {\n        x: origin.x + polar2cartesian(point1PolarTransformed).x,\n        y: origin.y + polar2cartesian(point1PolarTransformed).y\n      };\n\n      const point2PolarTransformed = {\n        distance: (axisDistance / originalAxisDistance) * height,\n        angle:\n          axisPointPolar.angle +\n          originalPoint2Polar.angle -\n          originalPoint3Polar.angle\n      };\n\n      newPoints[2] = {\n        x: origin.x + polar2cartesian(point2PolarTransformed).x,\n        y: origin.y + polar2cartesian(point2PolarTransformed).y\n      };\n\n      return newPoints;\n    });\n  }\n\n  const DRAW_MODE_FUNCTION = {\n    handleDrag,\n    handleDragMirror,\n    handleDragLockAspect\n  };\n\n  const cssTransform = transform2d(\n    width,\n    height,\n    points[0].x - width * 0,\n    points[0].y - height * 0,\n    points[1].x - width * 0,\n    points[1].y - height * 0,\n    points[2].x - width * 0,\n    points[2].y - height * 0,\n    points[3].x - width * 0,\n    points[3].y - height * 0\n  );\n\n  const cssInverse = `matrix3d(${invertMatrix(cssTransform).join(',')})`;\n\n  const interpolatedCssInverse25 = invertMatrix(cssTransform)\n    .flat()\n    .map((el, elIdx) => {\n      return el * 0.25 + nullTransformArray[elIdx] * (1 - 0.25);\n    });\n  const cssInverse25 = `matrix3d(${interpolatedCssInverse25.join(',')})`;\n\n  const interpolatedCssInverse50 = invertMatrix(cssTransform)\n    .flat()\n    .map((el, elIdx) => {\n      return el * 0.5 + nullTransformArray[elIdx] * (1 - 0.5);\n    });\n  const cssInverse50 = `matrix3d(${interpolatedCssInverse50.join(',')})`;\n\n  const interpolatedCssInverse75 = invertMatrix(cssTransform)\n    .flat()\n    .map((el, elIdx) => {\n      return el * 0.75 + nullTransformArray[elIdx] * (1 - 0.75);\n    });\n  const cssInverse75 = `matrix3d(${interpolatedCssInverse75.join(',')})`;\n\n  function multmm(a, b) {\n    // multiply two matrices\n    var c = Array(9);\n    for (var i = 0; i != 3; ++i) {\n      for (var j = 0; j != 3; ++j) {\n        var cij = 0;\n        for (var k = 0; k != 3; ++k) {\n          cij += a[3 * i + k] * b[3 * k + j];\n        }\n        c[3 * i + j] = cij;\n      }\n    }\n    return c;\n  }\n\n  function sixteenToNine(sixteen) {\n    const [\n      var0,\n      var3,\n      null7,\n      var6,\n      var1,\n      var4,\n      null1,\n      var7,\n      null2,\n      null3,\n      null4,\n      null5,\n      var2,\n      var5,\n      null6,\n      var8\n    ] = sixteen;\n\n    return [var0, var1, var2, var3, var4, var5, var6, var7, var8];\n  }\n\n  function nineToSixteen(t) {\n    return [\n      t[0],\n      t[3],\n      0,\n      t[6],\n      t[1],\n      t[4],\n      0,\n      t[7],\n      0,\n      0,\n      1,\n      0,\n      t[2],\n      t[5],\n      0,\n      t[8]\n    ];\n  }\n\n  function multmm2(sixteenA, sixteenB) {\n    const nineA = sixteenToNine(sixteenA);\n    const nineB = sixteenToNine(sixteenB);\n\n    return nineToSixteen(multmm(nineA, nineB));\n  }\n\n  // function transformStyles(deep = 1) {\n  //   let newDeepCss = nullTransformArray;\n  //   for (let x = 0; x < deep; x++) {\n  //     newDeepCss = multmm2(newDeepCss, cssTransform.flat());\n  //   }\n\n  //   const deepCss = `matrix3d(${newDeepCss.join(',')})`;\n\n  //   return {\n  //     height,\n  //     width,\n  //     transform: deepCss\n  //   };\n  // }\n\n  const imageTransformArray = [nullTransformArray];\n\n  for (let imageIdx = 1; imageIdx < drosteDeep; imageIdx++) {\n    imageTransformArray.push(\n      multmm2(imageTransformArray[imageIdx - 1], cssTransform.flat())\n    );\n  }\n\n  // function transformStyles(deep = 1) {\n  //   return {\n  //     height,\n  //     width,\n  //     transform: new Array(deep).fill(css).join(' ')\n  //   };\n  // }\n\n  return (\n    <Fragment key={sourceImage.src}>\n      <div\n        className=\"main\"\n        onClick={() => {\n          showSidebarSet(false);\n        }}\n      >\n        <JBX accent={'#e74c3c'} />\n        <div\n          className=\"img image-container-cut\"\n          style={{\n            height,\n            width,\n            overflow: 'hidden'\n          }}\n        >\n          <div\n            className=\"image-container -transformable\"\n            style={{\n              animation: `loop${currentAnimation} ${DEFAULT_SPEEDS[currentSpeed]} linear infinite`\n            }}\n          >\n            {imageTransformArray.map((transform, imageIdx) => (\n              <img\n                key={imageIdx + sourceImage.src}\n                alt=\"\"\n                className=\"img -transformed -transformable\"\n                style={{\n                  width,\n                  height,\n                  transform: `matrix3d(${transform.join(',')})`\n                }}\n                src={sourceImage.src}\n              />\n            ))}\n          </div>\n        </div>\n\n        <Draggable\n          defaultPosition={points[0]}\n          position={points[0]}\n          onDrag={(evt, data) => DRAW_MODE_FUNCTION[drawMode](data, 0)}\n        >\n          <button\n            style={{ display: currentAnimation === 'Off' ? 'block' : 'none' }}\n            className=\"point\"\n          >\n            0\n          </button>\n        </Draggable>\n\n        {drawMode !== 'handleDragLockAspect' && (\n          <Draggable\n            defaultPosition={points[1]}\n            position={points[1]}\n            onDrag={(evt, data) => DRAW_MODE_FUNCTION[drawMode](data, 1)}\n          >\n            <button\n              style={{ display: currentAnimation === 'Off' ? 'block' : 'none' }}\n              className=\"point\"\n            >\n              1\n            </button>\n          </Draggable>\n        )}\n\n        {drawMode !== 'handleDragLockAspect' && (\n          <Draggable\n            defaultPosition={points[2]}\n            position={points[2]}\n            onDrag={(evt, data) => DRAW_MODE_FUNCTION[drawMode](data, 2)}\n          >\n            <button\n              style={{ display: currentAnimation === 'Off' ? 'block' : 'none' }}\n              className=\"point\"\n            >\n              2\n            </button>\n          </Draggable>\n        )}\n\n        <Draggable\n          defaultPosition={points[3]}\n          position={points[3]}\n          onDrag={(evt, data) => DRAW_MODE_FUNCTION[drawMode](data, 3)}\n        >\n          <button\n            style={{ display: currentAnimation === 'Off' ? 'block' : 'none' }}\n            className=\"point\"\n          >\n            3\n          </button>\n        </Draggable>\n      </div>\n\n      <div className={`sidebar ${finalShowSidebar ? '' : '-hide'}`}>\n        <div className=\"sidebar-element\">\n          <Dropdown\n            label=\"Controls\"\n            value={drawMode}\n            options={{\n              handleDrag: 'Free',\n              handleDragMirror: 'Mirror',\n              handleDragLockAspect: 'Aspect Lock'\n            }}\n            onChange={drawModeSet}\n          />\n        </div>\n\n        <div className=\"sidebar-element\">\n          <Dropdown\n            label=\"Depth\"\n            value={drosteDeep}\n            options={{ 8: 8, 16: 16, 32: 32, 72: 72, 128: 128, 256: '256 ⚠️' }}\n            onChange={(val) => drosteDeepSet(Number(val))}\n          />\n        </div>\n\n        <div className=\"sidebar-element\">\n          <Dropdown\n            label=\"Animation\"\n            value={currentAnimation}\n            options={DEFAULT_ANIMATIONS}\n            onChange={currentAnimationSet}\n          />\n        </div>\n\n        <div className=\"sidebar-element\">\n          <Dropdown\n            disabled={currentAnimation == 'Off'}\n            label=\"Animation Speed\"\n            value={currentSpeed}\n            options={DEFAULT_SPEEDS}\n            onChange={currentSpeedSet}\n          />\n        </div>\n\n        <hr />\n\n        <div className=\"sidebar-element\">\n          <Dropdown\n            label=\"Load Example\"\n            value={null}\n            options={Object.keys(EXAMPLES)}\n            onChange={(exampleKey) => {\n              const exampleObject = EXAMPLES[Object.keys(EXAMPLES)[exampleKey]];\n              sourceImageSet(exampleObject);\n            }}\n          />\n        </div>\n\n        <div className=\"sidebar-element\">\n          <Text>\n            Droste Creator is a tool to create recursive images. Source{' '}\n            <A href=\"https://github.com/javierbyte/droste-creator\">Github</A>.\n            Code and pictures by <A href=\"https://javier.xyz\">javierbyte</A>.\n          </Text>\n        </div>\n\n        {false && (\n          <div className=\"sidebar-element\">\n            <Text>\n              {Number(points[0].x / width).toFixed(4)},\n              {Number(points[0].y / height).toFixed(4)},\n              {Number(points[1].x / width).toFixed(4)},\n              {Number(points[1].y / height).toFixed(4)},\n              {Number(points[2].x / width).toFixed(4)},\n              {Number(points[2].y / height).toFixed(4)},\n              {Number(points[3].x / width).toFixed(4)},\n              {Number(points[3].y / height).toFixed(4)},\n            </Text>\n          </div>\n        )}\n      </div>\n\n      <div className=\"topnav\">\n        <Text style={{ flex: 1, display: 'flex', flexWrap: 'wrap' }}>\n          <div>Droste</div>\n          <strong>Creator</strong>\n        </Text>\n\n        <div style={{ flex: 1 }} />\n\n        <div className=\"jb-file-uploader-container\">\n          <Button>New Picture</Button>\n\n          <input\n            className=\"jb-file-uploader\"\n            type=\"file\"\n            onChange={onFileSelected}\n            multiple\n            accept=\"image/*\"\n            aria-label=\"Drop an image here, or click to select\"\n          />\n        </div>\n\n        <Space w={1} />\n\n        {!isSidebarAlwaysVisible && (\n          <Button\n            onClick={() => {\n              showSidebarSet(!showSidebar);\n            }}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            >\n              <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n              <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\n            </svg>\n          </Button>\n        )}\n      </div>\n\n      <style>{`\n        @keyframes loopIn {\n          0% {\n            transform: ${cssInverse};\n          }\n          25% {\n            transform: ${cssInverse75};\n          }\n          50% {\n            transform: ${cssInverse50};\n          }\n          75% {\n            transform: ${cssInverse25};\n          }\n          100% {\n            transform: ${nullTransform};\n          }\n        }\n\n        @keyframes loopOut {\n          0% {\n            transform: ${nullTransform};\n          }\n          100% {\n            transform: ${cssInverse};\n          }\n        }\n      `}</style>\n    </Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}